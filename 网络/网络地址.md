# 网络地址的变化

采用的一些资料<https://blog.csdn.net/u014465934/article/details/81146443>[百度](https://baike.baidu.com/item/%25E5%25B9%25BF%25E6%2592%25AD%25E5%259C%25B0%25E5%259D%2580)

### ip地址

A类地址和c类地址区别

|类别    | IP地址范围   | 单个网段最大主机数 | 最大网络数 | 子网掩码| 开头|
| --------- | -------- | -----:           | --:        | --: |--:|
| A  | 1.0.0.1 - 127.255.255.254     | 256^3-2 |   1 |  255.0.0.0     | 000|
| B  | 128.0.0.1 - 191.255.255.254   |   256^2-2 |   2 |   255.255.0.0      | 10|
| C  | 192.0.0.1 - 223.255.255.254  |   256-2 |   3 |  255.255.255.0     | 110|
|D(多波地址)| 224.0.0.0 - 239.255.255.255 |  256^3-2                |            |1110   |

E类目前还未使用，A类地址的第一位总是0，8位分配给网络号，24位分配给主机号。B类地址的前两位总是10，16位分配给网络号，16位分配给主机号。C类地址的前三位总是110，24位分配给网络号，8位分配给主机号。
### ipv4 和 ipv6
ipv4是一种无连接的协议，在链路层上，该协议会尽最大努力交付数据包。不保证所有数据包按照正确顺序到达。使用32位地址，所以会导致Ip枯竭，所以就有了**网络地址转换**技术，即允许一个整体机构以一个公用的ip地址出现在internet上。
而ipv6相对于ipv4而言，首先是地址的扩宽，第二个是提高了网络的吞吐量，第三是提高服务质量，可以实现优先控制。第四，安全性有了保证，采用点对点，第五，支持即插即用，第六，更好的支持了多播

### 子网掩码

所以`192.168.1.53/27`的相应掩码是`11111111.11111111.11111111.11100000`由于网络号数量不足，所以得向右的主机数借位，主机数的可用数量减少。
所以可用的主机数，

    2^5 = 32(可以容纳主机数)
    2^5 -2 = 30(所有的主机数)

对于全部是1的情况是为广播地址，而网络地址则是全部为1的情况。

    对于 192.168.1.53/27
    IP地址    11000000.10101000.000000001.00110101        192.168.1.53
    子网掩码  11111111.11111111.11111111.11100000         255.255.255.224
    网络地址  11000000.10101000.000000001.00100000        192.168.1.32（ip地址 与子网掩码与）
    广播地址  11000000.10101000.000000001.00111111        192.168.1.64 （后面填1）

所以可用的地址，就是`192.168.1.33~192.168.1.63`。

### 广播地址

是最后一个地址，即网络号，加上主机号全为1的地址。
1.  [TCP/IP协议](https://baike.baidu.com/item/TCP%2FIP%E5%8D%8F%E8%AE%AE)栈中, [传输层](https://baike.baidu.com/item/%E4%BC%A0%E8%BE%93%E5%B1%82)只有[UDP](https://baike.baidu.com/item/UDP)可以广播.
2. 只能对同一[子网](https://baike.baidu.com/item/%E5%AD%90%E7%BD%91)内部广播, [广播数据包](https://baike.baidu.com/item/%E5%B9%BF%E6%92%AD%E6%95%B0%E6%8D%AE%E5%8C%85)不经过路由器。
3. UDP的广播地址为255.255.255.255
4. 在winsock实现中, 有一个选项对应是否允许广播.必须调用setsockopt打开该选项.
5. 打开后, 用sendto向255.255.255.255发送的数据包全部广播.
